/* Variables y Reset */
:root{
    --clr-primary: #5882FA;
    --clr-accent: #E84C3C;
.background-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1; /* Asegurar que esté visible */
    background-size: cover;
    background-position: center;
    transition: background-image 0.5s ease-in-out;
}
    --clr-highlight: #A3A3A3;

    --clr-background-light: #f7f9fb;
    --clr-panel-light: rgba(255,255,255,0.75);
    --clr-border-light: rgba(0,0,0,0.08);
    --clr-text-light: #212121;
    --clr-text-muted-light: #757575;
    --clr-hover-light: rgba(0,0,0,0.03);

    --clr-background-dark: #121212;
    --clr-panel-dark: rgba(30,30,30,0.75);
    --clr-border-dark: rgba(255,255,255,0.08);
    --clr-text-dark: #E0E0E0;
    --clr-text-muted-dark: #B0B0B0;
    --clr-hover-dark: rgba(255,255,255,0.04);

    --clr-background: var(--clr-background-light);
.background-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
}

.background-item {
    position: relative;
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.2s ease;
}

.background-item:hover {
    transform: scale(1.05);
    border-color: var(--clr-primary);
}

.background-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.background-name {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0,0,0,0.6);
    color: #fff;
    padding: 8px;
    font-size: 0.8rem;
    text-align: center;
    font-weight: 500;
}

/* --- User Backgrounds: compact thumbnails + selection state --- */
#user-background-gallery { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
#user-background-gallery .bg-item { height: 120px; border-radius: 10px; overflow: hidden; position: relative; border: 2px solid transparent; transition: transform .18s ease, border-color .18s ease; }
#user-background-gallery .bg-item:hover { transform: scale(1.03); border-color: var(--clr-primary); }
#user-background-gallery .bg-item img,
#user-background-gallery .bg-item video { width: 100%; height: 100%; object-fit: cover; display: block; }
#user-background-gallery.bulk-delete-mode .bg-item { outline: 2px dashed rgba(255,255,255,0.18); }
#user-background-gallery .bg-item.selected { outline: 2px solid #20c997; box-shadow: 0 0 0 2px rgba(32, 201, 151, 0.35) inset; }
#user-background-gallery .bg-item.deleted { opacity: 0; transform: scale(0.98); transition: opacity .25s ease, transform .25s ease; }
    --clr-panel: var(--clr-panel-light);
    --clr-border: var(--clr-border-light);
    --clr-text: var(--clr-text-light);
    --clr-text-muted: var(--clr-text-muted-light);
    --clr-hover: var(--clr-hover-light);

    --border-radius: 14px;
    --blur-strength: 14px;
    --transition-speed: 0.28s;
    --clr-soft-shadow: 0 10px 40px rgba(0,0,0,0.12);
    --clr-panel-shadow: 0 15px 50px rgba(0,0,0,0.14);
    --max-width: 1200px;
}

[data-theme="dark"]{
    --clr-background: var(--clr-background-dark);
    --clr-panel: var(--clr-panel-dark);
    --clr-border: var(--clr-border-dark);
    --clr-text: var(--clr-text-dark);
    --clr-text-muted: var(--clr-text-muted-dark);
    --clr-hover: var(--clr-hover-dark);
    --clr-soft-shadow: 0 10px 40px rgba(0,0,0,0.45);
    --clr-panel-shadow: 0 15px 50px rgba(0,0,0,0.6);
}

/* Base */
*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0;
    font-family:'Poppins',sans-serif;
    background:var(--clr-background);
    color:var(--clr-text);
    transition: background var(--transition-speed), color var(--transition-speed);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
}

/* Contenedor para el fondo de pantalla */
.background-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1; /* Asegurar que esté visible */
    background-size: cover;
    background-position: center;
    transition: background-image 0.5s ease-in-out;
}
 

/* Layout */
.zen-interface{
    display:grid;
    grid-template-columns:80px 1fr;
    grid-template-rows:60px 1fr;
    height:100vh;
    gap:0;
}

/* Sidebar */
.sidebar{
    grid-row: 1 / 3;
    background:var(--clr-panel);
    border-right:1px solid var(--clr-border);
    backdrop-filter: blur(var(--blur-strength));
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:15px 0;
    gap:10px;
    z-index:20;
    box-shadow: var(--clr-soft-shadow);
}
.sidebar-nav{display:flex;flex-direction:column;gap:10px;flex-grow:1;width:100%;align-items:center}
.sidebar-btn{
    width:50px;height:50px;border-radius:12px;background:none;border:none;cursor:pointer;color:var(--clr-text-muted);
    display:flex;align-items:center;justify-content:center;
    transition: color .18s, background .18s, transform .18s, box-shadow .18s;
}
.sidebar-btn:hover{color:var(--clr-primary);background:var(--clr-hover)}
.sidebar-btn.selected{background:var(--clr-primary);color:#fff;box-shadow:0 6px 18px rgba(88,130,250,0.45)}
/* Micro-interacción de clic */
.sidebar-btn:active {
    transform: scale(0.92);
}

/* Topbar */
.topbar{
    grid-column:2/3;display:flex;justify-content:space-between;align-items:center;padding:0 20px;
    background:var(--clr-panel);border-bottom:1px solid var(--clr-border);backdrop-filter: blur(calc(var(--blur-strength) / 1.2));z-index:10;
}
.topbar-left{display:flex;align-items:center;gap:20px}

/* Focus dropdown */
.zenstudio-dropdown-container, .focus-dropdown-container{position:relative}
.focus-btn, .zenstudio-btn{background:none;border:none;color:var(--clr-text);font-size:1.05rem;font-weight:600;padding:6px 10px;border-radius:8px;cursor:pointer; display: flex; align-items: center; gap: 4px;}
.zenstudio-btn:hover, .focus-btn:hover{background:var(--clr-hover)}
.focus-menu{position:absolute;top:100%;right:0;background:var(--clr-panel);border:1px solid var(--clr-border);border-radius:10px;padding:8px 0;min-width:180px;box-shadow:var(--clr-soft-shadow);opacity:0;visibility:hidden;transform:translateY(10px);transition:all .28s}
.focus-menu.open{opacity:1;visibility:visible;transform:translateY(0)}
.focus-menu a{display:block;padding:8px 12px;text-decoration:none;color:var(--clr-text);transition:background .12s}
.focus-menu a:hover{background:var(--clr-hover);color:var(--clr-primary)}

/* --- Estilos para el nuevo menú de avatar --- */
.avatar-menu { min-width: 260px; padding: 0; }

/* Corrección para el menú de ZenStudio para que se alinee a la izquierda */
#zenstudio-menu {
    left: 0;
    right: auto;
}
.avatar-menu-profile {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
}
.menu-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    object-fit: cover;
}
.menu-user-info { display: flex; flex-direction: column; }
.menu-user-name { font-weight: 700; font-size: 1rem; color: var(--clr-text); }
.menu-user-email { font-size: 0.85rem; color: var(--clr-text-muted); }
.menu-separator { height: 1px; background: var(--clr-border); margin: 0 8px; }
.avatar-menu a { padding: 12px 15px; }
/* --- Fin estilos menú avatar --- */

/* Avatar & sound */
.sound-indicator{
    position: relative;
    width: 40px;
    height: 40px;
    background:none;
    border:none;
    color:var(--clr-text-muted);
    cursor:pointer;
    padding:0;
    transition:color .18s;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Icon state is based on mute status */
.sound-indicator:not(.muted) #sound-on-icon { opacity: 1; }
.sound-indicator:not(.muted) #sound-off-icon { opacity: 0; }
.sound-indicator.muted #sound-on-icon { opacity: 0; }
.sound-indicator.muted #sound-off-icon { opacity: 1; color: var(--clr-accent); }

/* Animation when audio is actually playing */
.sound-indicator.playing:not(.muted) {
    color: var(--clr-primary);
    animation: pulse 1.5s infinite ease-in-out;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

/* Aplicar la transición a los iconos de sonido */
#sound-on-icon,
#sound-off-icon { transition: opacity 0.35s ease; }

.topbar-right { display: flex; align-items: center; }
.user-avatar{
    width:38px;
    height:38px;
    border-radius:50%;
    object-fit: cover;
    aspect-ratio: 1 / 1;
    cursor:pointer;
    border: 2px solid var(--clr-border);
}

/* Main content */
.main-content{grid-column:2/3;grid-row:2/3;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center;padding:20px}

/* Spaces */
/* Estilo para el mensaje de bienvenida */
#welcome-message {
    position: relative; /* Para posicionar el botón de cierre */
    max-width: 700px;
    width: 100%;
    padding: 60px 40px;
    border-radius: var(--border-radius);
    background: var(--clr-panel);
    border: 1px solid var(--clr-border);
    backdrop-filter: blur(var(--blur-strength));
    box-shadow: var(--clr-soft-shadow);
    text-align: center;
}
#welcome-message h1 { font-size: 2rem; margin: 0 0 10px; font-weight: 700; }
#close-welcome-btn {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none; border: none; color: var(--clr-text-muted); cursor: pointer; padding: 5px; transition: color .18s;
}
#close-welcome-btn:hover { color: var(--clr-accent); }
/* Floating panels */
.floating-panel{position:absolute;padding:22px;border-radius:var(--border-radius);z-index:200;background:var(--clr-panel);border:1px solid var(--clr-border);backdrop-filter: blur(calc(var(--blur-strength) * 1.2));box-shadow:var(--clr-panel-shadow);opacity:0;visibility:hidden;transform:scale(.95) translateY(10px);transition:opacity .3s ease,transform .3s ease,box-shadow .24s}
.floating-panel.active{opacity:1;visibility:visible;transform:scale(1)}
.panel-handle{display:flex;justify-content:space-between;align-items:center;padding-bottom:12px;margin-bottom:12px;border-bottom:1px solid var(--clr-border);cursor:grab;user-select:none}
.floating-panel:active .panel-handle{cursor:grabbing}
.panel-handle h2,.panel-handle h3{margin:0;font-size:1.15rem;font-weight:700}

/* close button */
.close-panel,.close-modal-btn{background:none;border:none;color:var(--clr-text-muted);cursor:pointer;padding:5px;transition:color .18s, transform .18s}
.close-panel:hover,.close-modal-btn:hover{color:var(--clr-accent); transform: scale(1.1);}

/* Micro-interacción de clic para botones */
.action-btn:active, .close-panel:active, .close-modal-btn:active {
    transform: scale(0.95);
    transition-duration: 0.1s;
}

/* Buttons general */
.action-btn{
    padding:8px 15px;border-radius:10px;font-size:.9rem;font-weight:600;cursor:pointer;transition:all .2s;
    display:inline-flex;align-items:center;gap:8px;justify-content:center;
}
.primary-btn{background:var(--clr-primary);color:#fff;border:none;box-shadow:0 6px 16px rgba(88,130,250,0.3)}
.primary-btn:hover{background:color-mix(in srgb, var(--clr-primary) 85%, black);box-shadow:0 8px 20px rgba(88,130,250,0.4)}
.secondary-btn{background:var(--clr-hover);color:var(--clr-text);border:1px solid var(--clr-border)}
.secondary-btn:hover{background:var(--clr-primary);color:#fff;border-color:var(--clr-primary)}
/* Danger/Success buttons for destructive/confirm actions */
.danger-btn{background:var(--clr-accent);color:#fff;border:none;box-shadow:0 6px 16px rgba(232,76,60,0.28)}
.danger-btn:hover{background:color-mix(in srgb, var(--clr-accent) 85%, black);}
.success-btn{background:#20c997;color:#fff;border:none;box-shadow:0 6px 16px rgba(32,201,151,0.28)}
.success-btn:hover{background:color-mix(in srgb, #20c997 85%, black);}
