/* Timer Panel */
.timer-display{font-size:4.5rem;font-weight:700;text-align:center;margin:20px 0;line-height:1}
.timer-controls{display:flex;justify-content:center;align-items:center;gap:10px;margin-bottom:20px}
.timer-controls input{width:60px;padding:8px;border:1px solid var(--clr-border);border-radius:8px;background:var(--clr-hover);color:var(--clr-text);text-align:center}
.timer-actions{display:flex;justify-content:center;gap:15px}
.timer-actions .primary-btn[aria-pressed="true"]{background:var(--clr-accent);box-shadow:0 6px 16px rgba(232,76,60,0.3)}
.timer-actions .primary-btn[aria-pressed="true"]:hover{background:color-mix(in srgb, var(--clr-accent) 85%, black)}

/* Task Panel */
.task-input-group{display:flex;gap:10px;margin-bottom:15px}
#new-task-input{flex-grow:1;padding:10px;border-radius:8px;border:1px solid var(--clr-border);background:var(--clr-hover);color:var(--clr-text)}
#task-list{list-style:none;padding:0;margin:0;max-height:250px;overflow:auto}
.task-item{display:flex;align-items:center;padding:10px 0;border-bottom:1px dotted var(--clr-border); animation: task-fade-in 0.4s ease forwards;}
.task-item:last-child{border-bottom:none}
.task-item input[type="checkbox"]{margin-right:10px;cursor:pointer}
.task-text{flex-grow:1;font-size:.95rem}
.task-item.fade-out { animation: task-fade-out 0.4s ease forwards; }

@keyframes task-fade-in {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
@keyframes task-fade-out {
    from { opacity: 1; transform: scale(1); }
    to { opacity: 0; transform: scale(0.95); }
}

.task-item.completed .task-text{text-decoration:line-through;color:var(--clr-text-muted)}
.delete-task-btn{background:none;border:none;color:var(--clr-accent);cursor:pointer;padding:5px;opacity:.8;transition:opacity .15s}
.delete-task-btn:hover{opacity:1}

/* Notes Panel */
.notes-toolbar {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--clr-border);
}
.format-btn {
    background: var(--clr-hover);
    border: 1px solid var(--clr-border);
    color: var(--clr-text-muted);
    width: 34px;
    height: 34px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all .2s;
}
.format-btn:hover {
    background: var(--clr-primary);
    color: #fff;
    border-color: var(--clr-primary);
}

/* --- Estilos para el nuevo dropdown de formato (tamaño de letra) --- */
.format-dropdown-container {
    position: relative;
}

/* Ajuste para el botón que ahora contiene texto y un icono */
#notes-fontsize-toggle {
    width: auto; /* Ancho automático para acomodar el texto */
    padding: 0 10px;
    gap: 6px;
}

#notes-fontsize-toggle svg {
    transition: transform 0.2s ease;
}

.format-dropdown-menu {
    position: absolute;
    top: calc(100% + 5px);
    left: 0;
    background: var(--clr-panel);
    border: 1px solid var(--clr-border);
    border-radius: 10px;
    padding: 6px;
    min-width: 150px;
    box-shadow: var(--clr-soft-shadow);
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px);
    transition: all .2s ease;
    z-index: 20; /* Asegurar que esté por encima de otros elementos */
}

.format-dropdown-menu.open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.format-dropdown-item { display: block; width: 100%; text-align: left; padding: 8px 12px; border-radius: 6px; background: none; border: none; color: var(--clr-text); cursor: pointer; transition: background .15s; }
.format-dropdown-item:hover, .format-dropdown-item.active { background: var(--clr-hover); color: var(--clr-primary); }

/* Ajustes para que el panel de notas sea flexible y el contenido se expanda */
#content-notes {
    display: flex;
    flex-direction: column;
}
#content-notes .panel-content {
    flex-grow: 1; /* Permite que el contenedor del editor crezca */
}

/* --- Estilos para el panel de Media con Pestañas --- */
.media-tabs {
    display: flex;
    border-bottom: 1px solid var(--clr-border);
    margin-bottom: 15px;
}
.media-tab-btn {
    padding: 10px 15px;
    background: none;
    border: none;
    color: var(--clr-text-muted);
    cursor: pointer;
    font-weight: 600;
    position: relative;
    transition: color .2s;
}
.media-tab-btn:hover {
    color: var(--clr-text);
}
.media-tab-btn.active {
    color: var(--clr-primary);
}
.media-tab-btn.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--clr-primary);
}
.media-tab-content {
    display: none;
}
.media-tab-content.active {
    display: block;
}

/* Estilos para el reproductor de archivos locales */
.local-player-display { text-align: center; }
#local-player-track-title { font-weight: 600; font-size: 1rem; display: block; margin-bottom: 15px; }
.local-player-controls { display: flex; justify-content: center; align-items: center; gap: 15px; margin-bottom: 15px; }
.media-control-btn{width:50px;height:50px;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .18s;padding:0}
.media-control-btn.large{width:65px;height:65px}
.local-player-volume { display: flex; align-items: center; justify-content: center; gap: 10px; color: var(--clr-text-muted); }
#local-player-volume-slider { width: 120px; }

.local-playlist {
    list-style: none;
    padding: 0;
    margin-top: 15px;
    max-height: 150px;
    overflow-y: auto;
}
.playlist-item {
    padding: 10px;
    border-radius: 8px;
    cursor: pointer;
    transition: background .2s;
    font-size: 0.9rem;
}
.playlist-item:hover { background: var(--clr-hover); }
.playlist-item.playing { background: var(--clr-hover); color: var(--clr-primary); font-weight: 600; }

/* --- Media Panel (YouTube Player) --- */
.media-url-input-group {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}
.media-url-input-group input {
    flex-grow: 1;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid var(--clr-border);
    background: var(--clr-hover);
    color: var(--clr-text);
}
.youtube-player-container {
    position: relative;
    width: 100%;
    padding-top: 56.25%; /* Proporción 16:9 */
    background: var(--clr-hover);
    border-radius: 10px;
    overflow: hidden;
}
.youtube-player-container iframe,
.youtube-player-container .youtube-placeholder {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
}
.youtube-placeholder { display: flex; align-items: center; justify-content: center; color: var(--clr-text-muted); }

/* Sounds Panel */
.panel-info{font-size:.85rem;color:var(--clr-text-muted);margin-bottom:15px}
#sound-list-container{display:flex;flex-direction:column;gap:10px;max-height:180px;overflow-y:auto}
.sound-item{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:8px;background:var(--clr-hover);border:1px solid var(--clr-border)}
.sound-info-group{display:flex;align-items:center;gap:10px}
.sound-info-group span{font-size:.9rem}

/* Botón de play/pause para sonidos individuales */
.sound-toggle-btn {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--clr-hover);
    color: var(--clr-text-muted);
    border: 1px solid var(--clr-border);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all .2s;
    padding: 0;
}
.sound-toggle-btn:hover {
    color: var(--clr-primary);
    border-color: var(--clr-primary);
}
.sound-item.playing .sound-toggle-btn {
    background: var(--clr-primary);
    color: #fff;
    border-color: var(--clr-primary);
}

.volume-control-group{display:flex;align-items:center;gap:8px}
.volume-slider{width:80px}

/* Calendar Panel */
.calendar-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}
.calendar-actions {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 15px;
}
.month-year-display{text-align:center}
#calendar-day-name{font-size:.85rem;color:var(--clr-primary);display:block;margin-bottom:-5px}
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:5px;text-align:center}
.day{padding:10px;border-radius:8px;font-weight:500;cursor:pointer;transition:background .12s;position: relative;}
.day.header{font-weight:700;cursor:default;color:var(--clr-text-muted)}
.day:not(.header):not(.current):hover{background:var(--clr-hover)}
.day.current{background:var(--clr-primary);color:#fff;box-shadow:0 6px 18px rgba(88,130,250,0.18)}
.day.event::after{ content:''; width:6px; height:6px; background:var(--clr-accent); border-radius:50%; position:absolute; bottom:4px; left:50%; transform:translateX(-50%); }

/* Schedule modal */
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:flex;justify-content:center;align-items:center;z-index:100;opacity:0;visibility:hidden;transition:opacity .3s}
.modal.active{opacity:1;visibility:visible}
.modal-content{background:var(--clr-panel);padding:25px;border-radius:var(--border-radius);box-shadow:var(--clr-panel-shadow);width:90%;max-width:500px;transform:scale(.95);transition:transform .3s}
.modal.active .modal-content{transform:scale(1)}
.modal-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--clr-border);padding-bottom:15px;margin-bottom:15px}
.modal-header h3{margin:0;font-size:1.2rem}
#new-event-text{flex-grow:1;padding:10px;border-radius:8px;border:1px solid var(--clr-border);background:var(--clr-hover);color:var(--clr-text)}
.event-input-group{display:flex;gap:10px;align-items:center}
#new-event-text{width:100%;min-height:100px;padding:10px;border-radius:8px;border:1px solid var(--clr-border);background:var(--clr-hover);color:var(--clr-text);resize:vertical}
#event-list{margin-top:12px;padding-top:8px;border-top:1px solid var(--clr-border);max-height:150px;overflow:auto}
.event-item{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dotted var(--clr-border)}
.event-item:last-child{border-bottom:none}

/* Credits Modal */
.credits-modal-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
}
.credit-card {
    background: var(--clr-hover);
    border: 1px solid var(--clr-border);
    border-radius: var(--border-radius);
    padding: 20px;
    display: flex;
    flex-direction: column;
}
.credit-card.placeholder {
    align-items: center;
    justify-content: center;
    color: var(--clr-text-muted);
    border-style: dashed;
}
.credit-name { font-weight: 700; font-size: 1.1rem; color: var(--clr-text); }
.credit-role { font-weight: 600; font-size: 0.9rem; color: var(--clr-primary); margin: 4px 0 12px; }
.credit-description { font-size: 0.9rem; color: var(--clr-text-muted); margin: 0 0 12px; line-height: 1.5; flex-grow: 1; }
.credit-email { font-size: 0.9rem; color: var(--clr-primary); text-decoration: none; font-weight: 500; }
.credit-email:hover { text-decoration: underline; }

/* Responsive */
@media (max-width:900px){
    .zen-interface{grid-template-columns:64px 1fr}
    .floating-panel{width:300px}
}
@media (max-width:600px){
    .floating-panel{position:fixed;left:12px;right:12px;top:90px;width:auto}
    .sidebar{display:none}
}

/* Sol y luna-Iconos */

#theme-toggle {
    position: relative;
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
}

/* --- Lógica del nuevo Icono de Tema (Sol/Luna) --- */
.icon-toggle {
    position: absolute;
    width: 24px;
    height: 24px;
    /* Transición para la animación de fade y rotación */
    transition: opacity 0.35s ease, transform 0.35s ease, color 0.35s ease;
}

/* Por defecto, si el tema es 'light' */
[data-theme="light"] #moon-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
    color: var(--clr-text-muted); /* Color de la luna en modo claro */
}
[data-theme="light"] #sun-icon {
    opacity: 0;
    transform: rotate(180deg) scale(0.5); /* Icono de sol oculto y rotado */
}

/* Cuando el tema es 'dark' */
[data-theme="dark"] #moon-icon {
    opacity: 0;
    transform: rotate(-180deg) scale(0.5); /* Icono de luna oculto y rotado */
}
[data-theme="dark"] #sun-icon {
    opacity: 1;
    transform: rotate(0deg) scale(1);
    color: #ffda73; /* Color del sol en modo oscuro (o el que desees) */
}

/* Asegurar que el hover afecte a los iconos */
#theme-toggle:hover .icon-toggle {
    /* Mantenemos el efecto de hover */
    transform: scale(1.12) !important;
}

.calendar-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding: 0 10px; /* Un poco de padding horizontal */
}

#calendar-month-year {
    font-size: 1.1em;
    font-weight: 600;
    color: var(--clr-text); /* Color de texto principal */
    flex-grow: 1; /* Permite que ocupe el espacio central */
    text-align: center;
    margin: 0;
}

.calendar-nav-btn {
    /* Estilo base */
    background: none;
    border: none;
    cursor: pointer;
    width: 36px;
    height: 36px;
    border-radius: 8px; /* Bordes suaves */
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--clr-text-muted); /* Color suave para los iconos */
    transition: background-color 0.2s ease, color 0.2s ease;
    padding: 0;
}

/* Efecto hover */
.calendar-nav-btn:hover {
    background-color: var(--clr-hover); /* El color de hover de tu tema */
    color: var(--clr-primary); /* Color principal al pasar el ratón */
}

/* Color activo/enfocado */
.calendar-nav-btn:focus-visible {
    outline: 2px solid var(--clr-primary);
    outline-offset: 2px;
}

/* Asegurar que los iconos SVG usen el color del botón */
.calendar-nav-btn svg {
    stroke: currentColor;
}

/* Estilo para el input de Minutos de Enfoque (Temporizador) */
.pomodoro-panel input[type="number"] {
    /* Fondo, borde y color acorde al diseño del panel ZenFocus */
    background: var(--clr-panel); 
    border: 1px solid var(--clr-border); 
    color: var(--clr-text);
    
    /* Diseño y tamaño */
    padding: 8px 12px;
    border-radius: 10px; 
    width: 80px; 
    text-align: center;
    font-weight: 600;
    font-size: 1em; /* Asegurar tamaño de fuente */

    /* Quitar flechas por defecto en Firefox */
    -moz-appearance: textfield; 
    
    /* Opcional: Estilo en foco */
    outline: none;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

/* Quitar flechas en Chrome/Safari/Edge */
.pomodoro-panel input[type="number"]::-webkit-outer-spin-button,
.pomodoro-panel input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.pomodoro-panel input[type="number"]:focus {
    border-color: var(--clr-primary);
    /* Usar un color transparente para el foco si existe, o usar el primario */
    box-shadow: 0 0 0 2px rgba(88, 130, 250, 0.2); 
}

/* Aplicar el mismo estilo visual al textarea de notas rápidas para coherencia */
/* Estilo para el nuevo div 'contenteditable' de notas */
#quick-notes[contenteditable="true"] {
    background: var(--clr-hover);
    border: 1px solid var(--clr-border);
    color: var(--clr-text);
    padding: 15px;
    border-radius: 10px;
    width: 100%; /* Ocupa todo el ancho del contenedor */
    height: 100%; /* Ocupa toda la altura disponible */
    font-family: 'Poppins', sans-serif;
    font-size: 0.95em;
    line-height: 1.6;
    outline: none;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    overflow-y: auto;
    resize: none; /* Desactivamos el redimensionador nativo */
}

#quick-notes[contenteditable="true"]:focus {
    border-color: var(--clr-primary);
    box-shadow: 0 0 0 2px rgba(88, 130, 250, 0.2);
}

/* Placeholder para el div contenteditable */
#quick-notes[contenteditable="true"]:empty:before {
    content: attr(data-placeholder);
    color: var(--clr-text-muted);
    pointer-events: none;
    display: block; /* or inline-block */
}

/* Estilo para el texto formateado (negritas y listas) dentro del div de notas */
#quick-notes strong,
#content-notes strong {
    font-weight: 700;
    color: var(--clr-primary); /* Resaltar negritas con el color primario */
}

/* Estilo de lista simple (ya que estamos en un textarea, el formato es limitado) */
#content-notes ul {
    list-style-type: '• ';
    margin-left: 20px;
    padding-left: 0;
}

#quick-notes li,
#content-notes li{
    margin-bottom: 5px;
    padding-left: 5px;
}

/* --- Estilos para la galería de fondos --- */
.background-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
}

.background-item {
    position: relative;
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.2s ease;
}

.background-item:hover {
    transform: scale(1.05);
    border-color: var(--clr-primary);
}

.background-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.background-name {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(0,0,0,0.6);
    color: #fff;
    padding: 8px;
    font-size: 0.8rem;
    text-align: center;
    font-weight: 500;
}

/* ------------------------------------------------ */

/* --- Estilos para el control de redimensionamiento de paneles --- */
.resize-handle {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 16px;
    height: 16px;
    cursor: nwse-resize;
    z-index: 1; /* Asegura que esté sobre el contenido del panel */
    background: transparent;
    /* Opcional: Añadir un indicador visual */
    background-image: linear-gradient(135deg, 
        transparent 0%, transparent 55%, 
        var(--clr-border) 55%, var(--clr-border) 70%, 
        transparent 70%, transparent 85%, 
        var(--clr-border) 85%, var(--clr-border) 100%);
}
